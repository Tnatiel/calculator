
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configure</title>
    <link rel="stylesheet" href="/styles/config.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Alegreya+SC&family=Amatic+SC:wght@700&family=Archivo+Narrow:wght@500&family=Concert+One&family=Source+Code+Pro&display=swap" rel="stylesheet">
</head>
    <body id="body">
        <main>
            <section class="main-sec">
                <!-- TRY BULID -->

                <h1 id="header">Customize the page as you please</h1>
                <form name="myf" id="config-form">
                    <div class="labels color">
                        <label for="color-select">Please select a color:</label>
                        <select name="color" id="color-select">    
                            <option value="">--Choose a color--</option>
                            <option value="red">Red</option>
                            <option value="green">Green</option>
                            <option value="blue">Blue</option>
                            <option value="yellow">Yellow</option>
                            <option value="purple">Purple</option>
                        </select>
                    </div>

                    <div class="labels font">
                        <label for="font-select">Please select a font:</label>
                        <select name="font" id="font-select">
                            
                            <option value="">--Choose a font--</option>
                            <option value="alegreya-sc">Alegreya SC</option>
                            <option value="archivo-Narrow">Archivo Narrow</option>
                            <option value="concert-one">Concert One</option>
                            <option value="source-Code-Pro">Source Code Pro</option>
                            <option value="amatic-sc">Amatic SC</option>
                        </select>
                    </div>
                    <div class="mode">
                        <!-- DARK -->
                        <label class="labels" for="mode">Dark mode:</label>
                        <input type="radio" value="dark" name="mode" id="dark">
                        
                        <!-- LIGHT -->
                        <label class="labels" for="mode">Light mode:</label>
                        <input type="radio" value="light" name="mode" id="light">
                        <button id="sub" class="sub-btn"><input type="submit">Submit</button>
                    </div>  
                </form>
            </section>
        </main>
        <script import> // tried to export part of application.ts

            document.addEventListener('DOMContentLoaded', () => {
                localStorage.clear()
                document.getElementById('color-select').addEventListener('input', handle_select);
                document.getElementById('font-select').addEventListener('input', handle_select);         
                const ops = document.getElementsByName('mode');
                for (const op of ops) {
                    op.addEventListener('change', handle_select);
                }
            })

            function handle_select(ev) {
                let select = ev.target;
                localStorage.setItem(select.name, select.value)
                console.log(document.getElementById('body'))
            }
            
            
            document.getElementById('sub').addEventListener('click', (evt) => {
                evt.preventDefault()
                curPage = window
                
                window.close()
                document.addEventListener('click', () => {
                    const font = localStorage.getItem('font');
                    const color = localStorage.getItem('color');
                    const mode = localStorage.getItem('mode');
                    document.getElementById('body').style.fontFamily = font;
                    document.getElementById('body').style.backgroundColor = color;
                    if (mode === 'dark') {
                        document.getElementById('body').classList.add('dark-mode')
                    } else {document.getElementById('body').classList.remove('dark-mode')}
                })
            })
        </script>
    </body>
</html>